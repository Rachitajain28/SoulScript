<!DOCTYPE html>
<html>
<head>
  <title>My History | SoulScript</title>
</head>
<body>
<h2>ðŸ“œ Your Journal History</h2>
<div id="list"></div>

<script>
async function loadHistory() {
  const token = localStorage.getItem("token");

  const res = await fetch("http://localhost:5050/api/history/all", {
    headers: { Authorization: `Bearer ${token}` }
  });

  const data = await res.json();
  const container = document.getElementById("list");

  data.forEach(e => {
    container.innerHTML += `
      <div style="border:1px solid #ccc;padding:10px;margin:10px">
        <b>${new Date(e.createdAt).toDateString()}</b><br>
        Mood: ${e.mood}, Energy: ${e.energy}<br>
        Emotional Index: ${(e.score * 100).toFixed(1)}%<br>
        <i>${e.journalEntry}</i>
      </div>
    `;
  });
}

loadHistory();
</script>
</body>
</html>
